<!DOCTYPE html>
<html lang="en">

  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#546E7A">

    

    <title>转移博客到阿里云</title>

    
      
    

    <link rel="canonical" href="www.diaowenjie.cn/2020/10/27/Blogs.html">

    
    <meta name="keywords" itemprop="keywords" content="blog,css,html,php">
    <link rel="shortcut icon" sizes="128x128" href="/avatar/favicon.png">

    <meta name="robots" content="noarchive">

   
    <style>
.site-header {
   background-color: #546E7A;
   }
.page-header {
   background: url("https://api.dujin.org/bing/1920.php") no-repeat center; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size:cover; max-width:100%; margin: auto;text-align: center;margin-bottom:20px;
}
</style>

    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/fade.css">
    <meta name="google-site-verification" content="tb5-LFfZ4ccQdqYC0-JKdEi3uWBF3IFo8PNsDcahigs" />
  </head>
  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    

    
      <a class="site-title" href="/">刁文杰的博客</a>
    

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#ffffff" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#ffffff" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#ffffff" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
              
              
            
          
            
            
              
                <a class="page-link" href="/Billboard.html">Billboard</a>
              
            
          
            
            
              
                <a class="page-link" href="/about.html">About</a>
              
            
          
            
            
              
                <a class="page-link" href="/archives.html">Archives</a>
              
            
          
            
            
          
            
            
          
            
            
              
                <a class="page-link" href="/links.html">Links</a>
              
            
          
            
            
          
            
            
              
                <a class="page-link" href="/pages/tags.html">Tags</a>
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    
    
    
    
    <script>
      var OriginTitile = document.title;
      var titleTime;
      document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
          document.title = '刁文杰的博客 ' + OriginTitile;
          clearTimeout(titleTime);
        }
        else {
          document.title = '刁文杰的博客 ' + OriginTitile;
          titleTime = setTimeout(function() {
            document.title = OriginTitile;
          }, 2000);
        }});

    </script>

    <section class="page-header">
      <h1 class="project-name">转移博客到阿里云</h1>
      <h2 class="project-tagline"></h2>
      
        <h2 class="project-date">
        <time datetime="2020-10-27T00:00:00+08:00" itemprop="datePublished">
          
          Oct 27, 2020
        </time>
        
        
          • <span itemprop="author" itemscope itemtype=""><span itemprop="name">刁文杰的博客</span></span>
        
        </h2>
      
    </section>

    <section class="main-content fade">

      <article itemscope itemtype="">

  <header class="post-header">
      <link rel="dns-prefetch" href="//cdn.bootcss.com" />
    <h1 class="post-title" itemprop="name headline">转移博客到阿里云</h1>
    <p class="post-meta">
      <time datetime="2020-10-27T00:00:00+08:00" itemprop="datePublished">
        
        Oct 27, 2020
      </time>
      </p>
  </header>
<script type="text/javascript" async
src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  document.getElementsByTagName("img").className="bbb";  
  </script>
  
  <div itemprop="articleBody">
    <blockquote>
  <p>记录将博客从GitPages移植到服务器上。</p>
</blockquote>

<h1 id="目录">目录</h1>

<ul id="markdown-toc">
  <li><a href="#目录" id="markdown-toc-目录">目录</a></li>
  <li><a href="#jekyll" id="markdown-toc-jekyll">Jekyll</a>    <ul>
      <li><a href="#安装jekyll" id="markdown-toc-安装jekyll">安装jekyll</a></li>
    </ul>
  </li>
  <li><a href="#nginx" id="markdown-toc-nginx">Nginx</a></li>
  <li><a href="#编译项目" id="markdown-toc-编译项目">编译项目</a></li>
  <li><a href="#自动部署" id="markdown-toc-自动部署">自动部署</a>    <ul>
      <li><a href="#配置-webhook" id="markdown-toc-配置-webhook">配置 Webhook</a></li>
      <li><a href="#服务器接受推送" id="markdown-toc-服务器接受推送">服务器接受推送</a></li>
    </ul>
  </li>
</ul>
<h1 id="jekyll">Jekyll</h1>

<p>使用RVM进行安装Jekyll环境</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--keyserver</span> hkp://keys.gnupg.net <span class="nt">--recv-keys</span> 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB

curl <span class="nt">-sSL</span> https://get.rvm.io | bash <span class="nt">-s</span> stable

<span class="nb">source</span> /etc/profile.d/rvm.sh
</code></pre></div></div>

<p>安装完成以后查看版本</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rvm <span class="nt">-v</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 输出</span>
rvm 1.29.10 <span class="o">(</span>latest<span class="o">)</span> by Michal Papis, Piotr Kuczynski, Wayne E. Seguin <span class="o">[</span>https://rvm.io]
</code></pre></div></div>

<p>选择安装的ruby的版本：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rvm <span class="nb">install </span>2.7
</code></pre></div></div>

<p>等待安装完成以后便可以查看相应的版本。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ruby <span class="nt">-v</span>
<span class="c"># ruby 2.7.0p0 (2019-12-25 revision 647ee6f091) [x86_64-linux]</span>

gem <span class="nt">-v</span>
<span class="c"># 3.1.2</span>
</code></pre></div></div>

<p>更新gem</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem update <span class="nt">--system</span>
</code></pre></div></div>

<h2 id="安装jekyll">安装jekyll</h2>

<p>尝试安装 jekyll，大概率会出现找不到库</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>jekyll bundler
<span class="c"># ERROR:  Could not find a valid gem 'jekyll' (&gt;= 0) in any repository</span>
</code></pre></div></div>

<p>修改源</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 查看所有源</span>
gem sources <span class="nt">-l</span>

<span class="c"># 删掉所有源</span>
gem rem <span class="nt">--remove</span> http://rubygems.org/

<span class="c"># 只用ruby-china的这个源，就能正常安装，其他好多源都失效了</span>
gem rem <span class="nt">--add</span> https://gems.ruby-china.com/
</code></pre></div></div>

<p>再次安装，应该能正常装上了。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll -v
# jekyll 4.1.1
</code></pre></div></div>

<p>如果找不到jeky命令，首先查找ruby/bin的目录,可以看到一堆地址找到对应的bin所在目录</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem env
# 从上面的回显中寻找bin目录，添加到path目录
export PATH=${PATH}:/usr/local/rvm/gems/ruby-2.7.0/bin
</code></pre></div></div>

<ul>
  <li><a href="http://elmagnifico.tech/2020/08/06/Jekyll-blog-nginx/">参考 VPS上使用nginx搭建jekyll blog（转移github博客）</a></li>
</ul>

<h1 id="nginx">Nginx</h1>

<p>当安装好jekyll环境以后，就可以正常的编译jekyll项目，然后需要使用nginx服务器将编译完成后的文件发布出去。</p>

<p>nginx需要依赖 openssl、pcre、zlib、gcc-c++，我使用的阿里云服务器已经提前安装好，这四个都可以使用yum命令进行安装。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> wget http://nginx.org/download/nginx-1.10.2.tar.gz
</code></pre></div></div>

<p>解压，编译安装：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar </span>zxvf nginx-1.10.2.tar.gz
<span class="nb">cd </span>nginx-1.10.2
./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> make <span class="nb">install</span>
</code></pre></div></div>

<p>进入nginx安装路径：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>whereis nginx <span class="c"># 找到路径</span>
</code></pre></div></div>

<p>我的服务器是输出</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/nginx 
</code></pre></div></div>

<p>根据路径控制nginx</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.启动
/usr/local/nginx/sbin/nginx

2.停止 重启
/usr/local/nginx/sbin/nginx <span class="nt">-s</span> stop<span class="o">(</span>quit、reload<span class="o">)</span>

3.命令参考
/usr/local/nginx/sbin/nginx <span class="nt">-h</span>

4.验证配置文件
/usr/local/nginx/sbin/nginx <span class="nt">-t</span>

5.设置配置文件
vim /usr/local/nginx/conf/nginx.conf
</code></pre></div></div>

<p>此时便安装好了一个基本的nginx。</p>

<h1 id="编译项目">编译项目</h1>

<p>首先使用git命令将自己的blog clone下来</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/LostStarTvT/lostStarTvT.github.io.git
</code></pre></div></div>

<p>使用jekyll进行编译源代码</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll build <span class="nt">--source</span> /usr/local/coding/lostStarTvT.github.io <span class="nt">--destination</span> /usr/local/nginx/html
</code></pre></div></div>

<p>–source 表示源代码的路径， –destination 表示编译的生成的文件存放到哪，现在设置的是直接编译生成到nginx服务器的静态文件目录下。</p>

<ul>
  <li>参考 <a href="https://www.cnblogs.com/taiyonghai/p/6728707.html">nginx linux详细安装部署教程</a></li>
</ul>

<h1 id="自动部署">自动部署</h1>

<p>虽然手动将源码上传到github，然后手动使git pull 命令下载最新的版本，然后在进行编译生成可以实现更新，但有些麻烦，接下来实现自动化部署。</p>

<p>首先是github的webhook功能，即当github项目更新的时候，可以自动向目标网站发送一个请求。</p>

<h3 id="配置-webhook">配置 Webhook</h3>

<p>在 Github 仓库的项目界面，比如本博客项目 <code class="language-plaintext highlighter-rouge">https://github.com/LostStarTvT/lostStarTvT.github.io</code>，点击 Setting-&gt;Webhooks-&gt;Add Webhook，在添加 Webhooks 的配置信息，我的配置信息如下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Payload URL: http://www.ityouknow.com/deploy
Content type: application/json
Secret: 123456
</code></pre></div></div>

<p>如下图：</p>

<p><img src="http://favorites.ren/assets/images/2018/it/webhook.png" alt="img" /></p>

<h3 id="服务器接受推送">服务器接受推送</h3>

<p>我们需要在博客的服务器上面建立一个服务，来接收 Github 提交代码后的推送，从而来触发部署的脚本。 Github 上有一个开源项目可以做这个事情 <a href="https://github.com/rvagg/github-webhook-handler">github-webhook-handler</a>。</p>

<p>这个开源项目目的很单纯，就是负责接收 Github 推送过来的通知，然后执行部署脚本，不过他是使用 NodeJs 来开发的，所以我们先需要在 Centos 上面按照 Node 环境。</p>

<p>centos7 安装 Node 环境</p>

<p>首先添加源</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>rpm <span class="nt">-ivh</span> https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-11.noarch.rpm

//yum安装node.js
yum <span class="nb">install</span> <span class="nt">-y</span> nodejs
</code></pre></div></div>

<p>然后在安装 github-webhook-handler</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> github-webhook-handler     <span class="c">#安装 github-webhook-handler</span>

<span class="c">#如果没有安装成功，可以选择法2来安装</span>
npm <span class="nb">install</span> <span class="nt">-g</span> cnpm <span class="nt">--registry</span><span class="o">=</span>http://r.cnpmjs.org
cnpm <span class="nb">install</span> <span class="nt">-g</span> github-webhook-handler
</code></pre></div></div>

<p>安装成功之后，我们需要添加一个脚本。进入到安装目录下：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span>  /usr/lib/node_modules/github-webhook-handler
</code></pre></div></div>

<p>新建 deploy.js</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi deploy.js
</code></pre></div></div>

<p>脚本内容如下：</p>

<p>/usr/lib/node_modules/github-webhook-handler/delpoy.js</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var http <span class="o">=</span> require<span class="o">(</span><span class="s1">'http'</span><span class="o">)</span>
var createHandler <span class="o">=</span> require<span class="o">(</span><span class="s1">'github-webhook-handler'</span><span class="o">)</span>
var handler <span class="o">=</span> createHandler<span class="o">({</span> path: <span class="s1">'/deploy'</span>, secret: <span class="s1">'ityouknow'</span> <span class="o">})</span> //监听请求路径，和Github 配置的密码
 
<span class="k">function </span>run_cmd<span class="o">(</span>cmd, args, callback<span class="o">)</span> <span class="o">{</span>
  var spawn <span class="o">=</span> require<span class="o">(</span><span class="s1">'child_process'</span><span class="o">)</span>.spawn<span class="p">;</span>
  var child <span class="o">=</span> spawn<span class="o">(</span>cmd, args<span class="o">)</span><span class="p">;</span>
  var resp <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
 
  child.stdout.on<span class="o">(</span><span class="s1">'data'</span>, <span class="k">function</span><span class="o">(</span>buffer<span class="o">)</span> <span class="o">{</span> resp +<span class="o">=</span> buffer.toString<span class="o">()</span><span class="p">;</span> <span class="o">})</span><span class="p">;</span>
  child.stdout.on<span class="o">(</span><span class="s1">'end'</span>, <span class="k">function</span><span class="o">()</span> <span class="o">{</span> callback <span class="o">(</span>resp<span class="o">)</span> <span class="o">})</span><span class="p">;</span>
<span class="o">}</span>
 
http.createServer<span class="o">(</span><span class="k">function</span> <span class="o">(</span>req, res<span class="o">)</span> <span class="o">{</span>
  handler<span class="o">(</span>req, res, <span class="k">function</span> <span class="o">(</span>err<span class="o">)</span> <span class="o">{</span>
    res.statusCode <span class="o">=</span> 404
    res.end<span class="o">(</span><span class="s1">'no such location'</span><span class="o">)</span>
  <span class="o">})</span>
<span class="o">})</span>.listen<span class="o">(</span>3006<span class="o">)</span>//监听的端口
 
handler.on<span class="o">(</span><span class="s1">'error'</span>, <span class="k">function</span> <span class="o">(</span>err<span class="o">)</span> <span class="o">{</span>
  console.error<span class="o">(</span><span class="s1">'Error:'</span>, err.message<span class="o">)</span>
<span class="o">})</span>
 
handler.on<span class="o">(</span><span class="s1">'push'</span>, <span class="k">function</span> <span class="o">(</span>event<span class="o">)</span> <span class="o">{</span>
  console.log<span class="o">(</span><span class="s1">'Received a push event for %s to %s'</span>,
    event.payload.repository.name,
    event.payload.ref<span class="o">)</span><span class="p">;</span>
  run_cmd<span class="o">(</span><span class="s1">'sh'</span>, <span class="o">[</span><span class="s1">'/usr/local/depoly.sh'</span><span class="o">]</span>, <span class="k">function</span><span class="o">(</span>text<span class="o">){</span> console.log<span class="o">(</span>text<span class="o">)</span> <span class="o">})</span><span class="p">;</span>//成功后，执行的脚本。
<span class="o">})</span>
</code></pre></div></div>

<p>脚本的作业就是启动一个监听端口来接收请求，接收到请求后执行部署脚本，脚本内容的关键点已经标注上注释。</p>

<p>部署博客的脚本如下：depoly.sh</p>

<p>/usr/local/depoly.sh</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="sb">`</span><span class="nb">date</span><span class="sb">`</span>
<span class="nb">cd</span> /usr/local/coding/lostStarTvT.github.io 
<span class="nb">echo </span>start pull from github 
git pull https://github.com/LostStarTvT/lostStarTvT.github.io.git
<span class="nb">echo </span>start build..
jekyll build <span class="nt">--source</span> /usr/local/coding/lostStarTvT.github.io <span class="nt">--destination</span> /usr/local/nginx/html
</code></pre></div></div>

<p>就是拉取代码，进行部署而已。</p>

<p>这个脚本的启动需要借助 Node 中的一个管理 forever 。forever 可以看做是一个 nodejs 的守护进程，能够启动，停止，重启我们的 app 应用。</p>

<p>不过我们的先安装 forever，然后需要使用 forever 来启动 deploy.js 的服务，执行命令如下：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>首先进入deploy.js 所在的目录： <span class="nb">cd</span>  /usr/lib/node_modules/github-webhook-handler

npm <span class="nb">install </span>forever <span class="nt">-g</span>   <span class="c">#安装</span>
<span class="nv">$ </span>forever start deploy.js          <span class="c">#启动</span>
<span class="nv">$ </span>forever stop deploy.js           <span class="c">#关闭</span>
<span class="nv">$ </span>forever start <span class="nt">-l</span> forever.log <span class="nt">-o</span> out.log <span class="nt">-e</span> err.log deploy.js   

<span class="c">#输出日志和错误</span>
/root/node-v8.12.0-linux-x64/lib/node_modules/forever/bin/forever start <span class="nt">-l</span> forever.log <span class="nt">-o</span> out.log <span class="nt">-e</span> err.log deploy.js

如果报错：
/root/node-v8.12.0-linux-x64/lib/node_modules/forever/bin/forever start <span class="nt">-a</span> <span class="nt">-l</span> forever.log <span class="nt">-o</span> out.log <span class="nt">-e</span> err.log deploy.js
</code></pre></div></div>

<p>同时一般情况下，我们不会对外保留很多端口，所以需要通过博客的地址来转发，需要在 Nginx 上面添加一个转发配置，用来监听的 /deploy 请求转发到 nodejs 服务上，配置代码如下：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>location <span class="o">=</span> /deploy <span class="o">{</span>
     proxy_pass http://127.0.0.1:3006/deploy<span class="p">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>这样我们整个自动化部署就完了，每次提交代码时，Github 会发送 Webhook 给地址<code class="language-plaintext highlighter-rouge">http://www.ityouknow.com/deploy</code>，Nginx 将 <code class="language-plaintext highlighter-rouge">/deploy</code> 地址转发给 Nodejs 端口为 3306 的服务，最后通过 github-webhook-handler 来执行部署脚本，已到达自动部署的目的。</p>

<p>以后只需要我们提交代码到 Github ,就会自动触发博客的自动化部署。</p>

<p>主要也就是有两个文件</p>

<ul>
  <li>/usr/lib/node_modules/github-webhook-handler/delpoy.js  监听3006端口的nodejs脚本</li>
  <li>/usr/local/depoly.sh  自动拉起git 然后进行编译的脚本。</li>
</ul>

<p>但是因为我还没有备份，所以还不能测试能否争取的实现。 但是想在还没有想好如何实现。</p>

<ul>
  <li>参考： <a href="https://www.cnblogs.com/ityouknow/p/11904647.html">技术人如何利用github+jekyll 搭建一个独立免费的技术博客</a></li>
</ul>

  </div>

    
<footer>
    <div style="color: #B0BEC5">标签：
    
    <a class="tag" style="color: #E91E63;font-weight:bold" href="/pages/tags#java">#java</a>
    
  </div>
</footer>






  
  
  

  
  
</article>


      <footer class="site-footer">
        <!-- <span class="site-footer-owner"> 刁文杰的博客©2018-2019.</span> -->
        
      <center>
          <span class="site-footer-credits">刁文杰的博客©2018-2020.</span><br>
          <!-- <span class="site-footer-credits" style="font-size:12px">Already <span id="sitetime"></span> days.</span><br> -->
          <!-- <span class="site-footer-credits" href>浙ICP备2020039014号</span><br> -->
          <a href="http://beian.miit.gov.cn/" class="site-footer-credits"> 浙ICP备2020039014号</a> <br>
      </center>

     
        

      </footer>
    </section>

    

    
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      inlineMath: [['$','$']]
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>


      <script>
          ajax()
  function ajax(option){
    var xhr = null;
    if(window.XMLHttpRequest){
      xhr = new window.XMLHttpRequest();
    }else{ // ie
      xhr = new ActiveObject("Microsoft")
    }
    xhr.open("get","");
    xhr.send(null);
    xhr.onreadystatechange = function(){
      var time = null,
          curDate = null;
      if(xhr.readyState===2){
        // Get time
        time = xhr.getResponseHeader("Date");
        console.log(xhr.getAllResponseHeaders())
        curDate = new Date(time);
        document.getElementById("sitetime").innerHTML = (parseInt((((curDate.getTime() / 1000) - 1571133419 ) / 86400 )));
        
      }
    }
  }
      </script>
      
      <script src = '/assets/js/instantclick.min.js' data-no-instant></script>
      <script data-no-instant>InstantClick.init();</script>
      
  </body>
</html>
